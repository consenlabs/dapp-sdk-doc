<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="minimal-ui,width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
  <title>Dapp Demo</title>
  <style>
    h1 {
      font-size: 20px;
    }

    a {
      display: block;
      font-size: 20px;
      margin-top: 40px;
    }

    img {
      display: block;
    }

    section {
      background: #eee;
      margin: 20px 10px;
      padding: 10px;
    }

    section button {
      margin-bottom: 10px;
    }

    section pre {
      padding: 10px;
      overflow: auto;
      font-size: 16;
      line-height: 1.45;
      background-color: #f6f8fa;
      border-radius: 3px;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <h1 id="h1"> Dapp API Example</h1>

  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAJH0lEQVR4Xu2d21bsOAwFp///o5mVmcXhxJi4vFt2XyheW1HkrZKsOA3cPj4+Pv7xRwWKFbgJVrGiuvtPAcEShCUKCNYSWXUqWDKwRAHBWiKrTgVLBpYoIFhLZNWpYMnAEgUEa4msOsVg3W63h6lFXg6k8bW+n81PT/Q0xqoEonzQk/dHLgYtJARfsOZxQ/kQrPOr0rSAVgFqx5oHH1+BKsSOhfW81xDlI+1YxHm6gLZr9O5FOgvpIlU2ZK1VmhF9SDzEpqczWUc8vBPnJHDS6gXrrJJghWQR4exYX+LuLPLjruR+dqzme46k9ROoezVFEkJqkRQe8UNsiB7dXccZa/xUSOYwkiTB6qhEqiSpZDI/pTbtMuLqa544CSBEi3Rdj8zFQ7ZCImab7JXiChbpo9ezWlyMlVuhYH0liWixsqjI/ZMit2OB7RyL5FZ4UhONAq/asUiTr6raVVsqWUNVV6u6Fy5GwTpLjqqx8/oovW6UcME6fpcseF+XCjdKyPF5VTx2rKD47FiBaHasYV2XnrxXdQhyTjNcmR2LSDQcyn/9cUNPRXJivnM2ms70DxeQwltV5G8/vBPhBGsOZTLvClbnLXzc1oseSubS/LO1HQsoSaqE2LgVnhUgHf1lTt4BR8hkZ0UmRwkkaVXF0BOM6IOEBkZxl688bgBxIhMiHEkuqUjBuk6JYAFk0ydA8hBAICbFkMRIrgHydE0ECyhHEkCETAFJrxt1VbIuII9gHQqQJJEuMkpa7/Ga3NsZC+JOxEyrYnQdSdJvthnpV/05QSZ+pVMd7JW/3wwNWfvOXPQ6ePfJNX0q3LkYIu5vttmZC8HqzGHvCt9Lg7U7+NH9qmY+NC+AryYn8ZB7j3R41s/xjPVsC0gS2VsDSe4jD2yfTXcaj2CB//giWBSnLzvBEqx5asAVgiVYAJN5EwwWmWnIO7VkpnnX2Yi8PuqeERV9PyzJKUVMsIqSRAX/206w4Ls5O9YcXoIlWCdiyHZOEBMsCBYRs7UhSUoTQOKpmjN2+tmpYap96YxFErlTFBLPTiDSIhqtI/W79LpHv4ReubhRQo7PBetaJTsWoahjI1iCtW2ArtquV/mp8rtyt8AzFmkIyTs18lUWcm9ik94rTQCJaQQJ2YpSGxIfWXv3EJfOWCQIwSIqXdskZ4GCFX757v50/e/BjjWvpB0LaCZYQKTGZDlYydNTck13vwbv84gAJJ556ftXkHiq7pX6IXqk68DDexJEco1gpZjMX1eVn7uG9ySI5BrBmgckvaIqP4IFttQ0SaNjgyq/lX4ECwBBZgEiZFXiSDxV90r9ED3SdZTOWGSB5JxmVfUTIXtrSGJOtDiuSWMcaVZ51kVgEyxAgGCdRRKsBpq0GwiWYF32H8G6BoTqs7RjIefhf3Bo6aALHu1qK2Mm70mr1kXWMdJi9efxjEUWRwZGskDBmt+KiK4rbQQLzGFJESXX0EQT39TXKjvBEqwlbAmWYL0eWCTiqvmJ3KvKhnz9pmq7InNqapPqQda2tGORwAXrWqUUmlVnb0e0gkXIDmzsWB9D1exYQ4m+GwhWIViB/t0XqqRFo1YL/i4oOZAk8ZC1Ez/JupJ7H9eQEaMq5l6MuGORBVYlMklAck1vXiAJ6WlRlaTk/qSDroxZsMArpiSxFNAU/lFRC9bC/3qaJo10mlFiBeu7Qm6Fzd8gtWOdISEFW7oVkgTEQYGvIreLqdoOSHfqCgliJnqs1HW0NnJmNvLx+XncsVYKQHwLFk0xtxOsjlZ2LA7QT5aCJVj3U9Tx8DJgkdWTuYP4IaIkWyw5/zlsiG+yVuKH6EGedtN40HXpnzFaJQARjQ7PRNzkfiu33VW6ksJLdd3+VEiSRugnfohwq5Jmxyo8x1qZJAJSayNYZ0VItyZFTXS1Y4GzJgK1W2HhtxtaclNxSeKSMyoST1qhzxZPVTciXZ8+vHzzRYd3wfqSLoWYaEiSLVhJewrPqNJkk0Tasa7nt7tmLFJtVQP9syXy2eJ5q45Fmk8VWEQ4Ek/ih3Q+cu/UZlXMVfPlsS7ki85YRCjBIipd2whWRx/BEqxPBeKvzXQHtkXnRCmwq6r/fnx+9rAqZrR9wfwhX26F4yeeFOwEwF8HFnkqJI/uiXBJgnpDZgoIqdA0RqJZhW/yUFK5TrwVClZFesc+UvhHngVrpNDE51XdsbKSR+ELVvPbLXSYr0r2KEFuhfOzY2UB4a2QJHKnDdmaq2zIusi9ns1P2h0JgIIV/A0I0p2J+I/2I1jgMDYdTl+x01R1PsESLMLSyYYUjGAJ1vuCldI9rUjngnSbI/cmlZ346V1D5i4ST5UNOZwlMXdnRfpKR7Cu8SL6kCRVQUP8CFbnzCwRbudTmB2LlBH8TV+yZSQ2boVn1UhREZun7FiQx4Sjb7+uvvNepNP0tj0SI0k2sSGikq2Z+CHrKp2x0huSxVSJm9xLsM4KpHnGJ++PTHa6OMEiClzbpNoLFvjWJHlxThJAipPYEFzcCsPDTyIusSEJECyiZPOAkZ5jkSc1Eg7xk3QDMisdNglY5Niiau3ED7Gp0vC4F/IlWLdhXpCQYEttb0SKahgcNKhcA/IlWIL1ySbp3nasTiWnHQJVqB3rpHjpUyEl/u8ISLJ32tDZDO5A02bkqTDRmQRCCoj4+W92fdWtMEkAAVSwKDrXdoIFtrDKSh6lLSmYkU/6eeU6BUuw/nAnWJ3zJ7LNERu3Qtrf3nQrbJdFvnFAht60askWVpMy5oWsNT1XIxq97FYoWIOOAbZ4wdr4W9ekGnsptWOdVbFjNZQIVgMI+HfH3UKrPMdiu//YilQ/mSEIJMTPOOK9Fsm6kmuOVZHrBKujgGB9iUIegGgJlW6F9KYjOzvWtUKkixANkwegUe4+Pxes4OmJirvKTrBCZUm1kS0sSUAY8tbLknUl1zxkxtqpZHpinsRIEkD8pvPKzoJp15rGXDq8E3GrbATrrCSBPwFUsOB31ROwSdKI3zRJCRDdjgFmRzsW+NsNJNnERrDmu6NbISBLsDaDBXKiiQr8UQCfY6mZCswoIFgzammLFRAsLJWGMwoI1oxa2mIFBAtLpeGMAoI1o5a2WAHBwlJpOKOAYM2opS1W4F+Z83wCuThrdAAAAABJRU5ErkJggg=="
  />
  <i>Use imToken2.0 DApp browser scan this qrCode to view exmaple.</i>

  <section>
    <button id="alert">alert</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('alert', 'winner winner, chicken dinnerÔºÅ')
      </pre>
    </details>
  </section>

  <section>
    <button id="close">close</button>
    <details>
      <summary>show code</summary>
      <pre>
  imToken.callAPI('close')
      </pre>
    </details>
  </section>

  <section>
    <button id="goBack">goBack</button>
    <details>
      <summary>show code</summary>
      <pre>
  imToken.callAPI('goBack')
      </pre>
    </details>
  </section>

  <section>
    <button id="toggleNavbar">toggleNavbar</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('toggleNavbar')
      </pre>
    </details>
  </section>


  <section>
    <button id="setClipboard">setClipboard</button>
    <details>
      <summary>show code</summary>
      <pre>
 imToken.callAPI('setClipboard', 'are you ok?')
      </pre>
    </details>
  </section>

  <section>
    <button id="share">share</button>
    <details>
      <summary>show code</summary>
      <pre>
 imToken.callAPI('share', {
    title: 'dapp example',
    message: 'this is example of dapp sdk',
    url: location.href,
  }, function (err, ret) {
    if(err) {
      alert('user not share')
    } else {
      alert('shared')
    }
  })
      </pre>
    </details>
  </section>

  <section>
    <button id="scan">scan</button>
    <details>
      <summary>show code</summary>
      <pre>
 imToken.callAPI('scan', null, function (err, ret) {
    if(err) {
      alert(err)
    } else {
      alert(ret)
    }
  })
      </pre>
    </details>
  </section>


  <section>
    <button id="setCalEvent">setCalEvent</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('setCalEvent', {
    title: 'test save event',
    settings : {
      notes: 'go to china this night',
      startDate: '2017-09-28T19:42:00.000Z',
      endDate: '2017-09-28T09:19:44.000Z',
      alarms: [{
        date: -1 //ios only
      }]
    }
  }, function(err, id) {
    if(err) {
      alert(err)
    } else {
      alert(id)
    }
  })
      </pre>
    </details>
  </section>


  <section>
    <button id="routeTo">routeTo</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('routeTo', 'Profile')
      </pre>
    </details>
  </section>


  <section>
    <button id="createPay">createPay</button>
    <details>
      <summary>show code</summary>
      <pre>
  var params = {
    contractAddress: '0x0000000000000000000000000000000000000000',
    to: '0x0fa38abec02bd4dbb87f189df50b674b9db0b468',
    from: web3.eth.defaultAccount,
    value: '1250000000000000',
    orderInfo: 'buy a cup of coffee',
    customizable: true,
  }

  imToken.callAPI('createPay', params, function (err, hash) {
    if (err) {
      alert(err)
    } else {
      alert(hash)
    }
  })
      </pre>
    </details>
  </section>


  <section>
    <button id="getCurrentAccount">getCurrentAccount</button>
    <details>
      <summary>show code</summary>
      <pre>
  imToken.callAPI('getCurrentAccount', null, function(err, address) {
    if(err) {
      alert(err)
    } else {
      alert(address)
    }
  })
      </pre>
    </details>
  </section>


  <section>
    <button id="getAccountList">getAccountList</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('getAccountList', '', function(err, list) {
    if(err) {
      alert(err)
    } else {
      alert(list)
    }
   })
      </pre>
    </details>
  </section>

  <section>
    <button id="getAssetTokens">getAssetTokens</button>
    <details>
      <summary>show code</summary>
      <pre>
  imToken.callAPI('getAssetTokens', null, function(err, assetTokens){
    if(err) {
      alert(err)
    } else {
       alert(assetTokens.map(function(t){
        return t.symbol + ' '
      }))
    }
  })
      </pre>
    </details>
  </section>

  <section>
    <button id="showAccountSwitch">showAccountSwitch</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('showAccountSwitch', {
     contractAddress: '0x0000000000000000000000000000000000000000',
   }, function(err, address) {
     if(err) {
       alert(err)
     } else {
       alert(address)
     }
   })
      </pre>
    </details>
  </section>

  <section>
    <button id="getContacts">getContacts</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('getContacts', null, function(err, contacts) {
     if(err) {
       alert(err)
     } else {
       alert(contacts)
     }
   })
      </pre>
    </details>
  </section>


  <section>
    <button id="getCurrentLanguage">getCurrentLanguage</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('getCurrentLanguage', null, function(err, language) {
     if(err) {
       alert(err)
     } else {
       alert(language)
     }
   })
      </pre>
    </details>
  </section>

  <section>
    <button id="getCurrentCurrency">getCurrentCurrency</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('getCurrentCurrency', null, function(err, currency) {
     if(err) {
       alert(err)
     } else {
       alert(currency)
     }
   })
      </pre>
    </details>
  </section>

  <section>
    <button id="getUserProfile">getUserProfile</button>
    <details>
      <summary>show code</summary>
      <pre>
imToken.callAPI('getUserProfile', null, function(err, profile) {
     if(err) {
       alert(err)
     } else {
       alert(profile)
     }
   })
      </pre>
    </details>
  </section>
</body>

<script>
  window.alert = function log(str) {
    imToken.callAPI('alert', JSON.stringify(str))
  }

  if (window.imToken) {
    alert('imToken ready')
  } else {
    window.addEventListener('sdkReady', function () {
      alert('imToken sdk ready')
    })
  }


  document.getElementById('alert').onclick = function () {
    imToken.callAPI('alert', 'winner winner, chicken dinnerÔºÅ')
  }


  document.getElementById('close').onclick = function () {
    imToken.callAPI('close')
  }

  document.getElementById('goBack').onclick = function () {
    imToken.callAPI('goBack')
  }

  document.getElementById('toggleNavbar').onclick = function () {
    imToken.callAPI('toggleNavbar')
  }

  document.getElementById('share').onclick = function () {
    imToken.callAPI('share', {
      title: 'dapp example',
      message: 'this is example of dapp sdk',
      url: location.href,
    }, function (err, ret) {
      if (err) {
        alert('user not share')
      } else {
        alert('shared')
      }
    })
  }

  document.getElementById('scan').onclick = function () {
    imToken.callAPI('scan', null, function (err, ret) {
      if (err) {
        alert(err)
      } else {
        alert(ret)
      }
    })
  }

  document.getElementById('setCalEvent').onclick = function () {
    imToken.callAPI('setCalEvent', {
      title: 'test save event',
      settings: {
        notes: 'notes',
        startDate: '2017-09-28T19:42:00.000Z',
        endDate: '2017-09-28T09:19:44.000Z',
        alarms: [{
          date: -1
        }]
      }
    }, function (err, result) {
      alert(result)
    })
  }

  document.getElementById('routeTo').onclick = function () {
    imToken.callAPI('routeTo', 'Profile')
  }

  document.getElementById('createPay').onclick = function () {

    var params = {
      contractAddress: '0x0000000000000000000000000000000000000000',
      to: '0x0fa38abec02bd4dbb87f189df50b674b9db0b468',
      from: web3.eth.defaultAccount,
      value: '1250000000000000',
      orderInfo: 'buy a cup of coffee',
      customizable: true,
    }

    imToken.callAPI('createPay', params, function (err, hash) {
      if (err) {
        alert(err)
      } else {
        alert(hash)
      }
    })
  }

  document.getElementById('getCurrentAccount').onclick = function () {
    imToken.callAPI('getCurrentAccount', null, function (err, address) {
      if (err) {
        alert(err)
      } else {
        alert(address)
      }
    })
  }

  document.getElementById('getAccountList').onclick = function () {
    imToken.callAPI('getAccountList', '', function (err, list) {
      if (err) {
        alert(err)
      } else {
        alert(list.join(' / '))
      }
    })
  }


  document.getElementById('getAssetTokens').onclick = function () {
    imToken.callAPI('getAssetTokens', null, function (err, assetTokens) {
      if (err) {
        alert(err)
      } else {
        alert(assetTokens.map(function (t) {
          return t.symbol + ' '
        }))
      }
    })
  }


  document.getElementById('showAccountSwitch').onclick = function () {
    imToken.callAPI('showAccountSwitch', {
      contractAddress: '0x0000000000000000000000000000000000000000',
    }, function (err, address) {
      if (err) {
        alert(err)
      } else {
        alert(address)
      }
    })
  }


  document.getElementById('getContacts').onclick = function () {
    imToken.callAPI('getContacts', null, function (err, contacts) {
      if (err) {
        alert(err)
      } else {
        alert(contacts)
      }
    })
  }

  document.getElementById('getCurrentLanguage').onclick = function () {
    imToken.callAPI('getCurrentLanguage', null, function (err, language) {
      if (err) {
        alert(err)
      } else {
        alert(language)
      }
    })
  }

  document.getElementById('getCurrentCurrency').onclick = function () {
    imToken.callAPI('getCurrentCurrency', null, function (err, currency) {
      if (err) {
        alert(err)
      } else {
        alert(currency)
      }
    })
  }


  document.getElementById('getUserProfile').onclick = function () {
    imToken.callAPI('getUserProfile', null, function (err, profile) {
      if (err) {
        alert(err)
      } else {
        alert(profile)
      }
    })
  }

</script>

</html>